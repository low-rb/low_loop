#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../lib/low_loop'

host = ENV.fetch('LOW_HOST', '127.0.0.1').freeze
port = ENV.fetch('LOW_PORT', 4133)
matrix_mode = ENV.fetch('LOW_MATRIX', false).to_i
sleep_duration = ENV.fetch('LOW_SLEEP', 0).to_i

config = Struct.new(:host, :port, :matrix_mode, :sleep_duration)

LowLoop.new.start(config: config.new(host, port, matrix_mode, sleep_duration))
